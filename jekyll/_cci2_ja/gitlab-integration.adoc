---

version:
- Cloud
redirect_from: /gitlab-vcs-support
---
= GitLab SaaS integration
:page-layout: classic-docs
:page-liquid:
:page-description: GitHub と CircleCI の連携方法について説明します。
:icons: font
:toc: macro

:toc-title:

[#overview]
== 概要

このドキュメントでは、GitLab プロジェクトと CircleCI の連携について説明し、 The sections below will introduce you to new concepts and ways to manage your CI/CD pipelines. We also outline what we are working on for future releases.

[#step-one-sign-up]
== 1. 新規登録

GitLab support is open to both new and existing users of CircleCI. 新規および既存ユーザーそれぞれに向けた下記手順をお読みください。

[.tab.signup.New_CircleCI_users]
--
**Create a CircleCI account and create your first organization**

. https://circleci.com/ja/signup/[CircleCI ユーザー登録] ページで、 **メールで登録** を選択します(パスワードも作成します)。
. メールアドレスとパスワードを設定したら、GitLab、GitHub、または Bitbucket への接続オプション画面が表示されます。 GitLab との **接続** をクリックします。 
+
NOTE: 新規アカウントと GitHub アカウントまたは Bitbucket アカウントとの接続を選択すると、アカウントはご使用の VCS のアカウント名に基づいてマージされます。 More information can be found in <<#user-account-integrations,Account integrations>> under the User settings section in this document.
. 新しい組織を作成するよう求められます。 組織名を入力して、 **Create Organization** をクリックします。
+
image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-create-org.png[Create new organization]

新しい組織を作成したら、 Web アプリのダッシュボードが表示されます。 下記の <<#step-two-create-a-new-project,手順 2>> に記載されている手順に従い、新しいプロジェクトを作成します。
--

[.tab.signup.Current_CircleCI_users]
--
**Create a new organization**

. https://app.circleci.com/[CircleCI Web アプリ] にログインします。
. ご自身の組織名をクリックし、画面左上で組織切り替えメニューを開きます。 **Create New Organization** を選択します。
. 新しい組織の一意の名前を入力します。
. **Create Organization** をクリックします。

この新しい組織で、組織内のユーザーと GitLab プロジェクトを管理することができます。 この組織のプランは最初は、 <<plan-free#,**Free プラン**>> になります。 後で他のプランにアップグレードすることが可能です。 この料金プランは、以前ご自身のアカウントで設定された GitHub または Bitbucket での組織とは無関係です。

新しい組織を作成すると、 その組織のダッシュボードが表示されます。 下記の <<#step-two-create-a-new-project,手順 2>> の手順に従って、新しい GitLab プロジェクトを設定します。

NOTE: 既存の CircleCI ユーザーは、メールアドレスとパスワードで登録することも可能です。 新しいメール/パスワードのアカウントを使用して、既にお持ちの VCS (GitHub または Bitbucket) アカウントに接続する場合は、アカウントはご使用の VCS のアカウント名に基づいてマージされます。 More information can be found in <<#user-account-integrations,Account integrations>> under the User settings section in this document.
--

[#step-two-create-a-new-project]
== 2. Create a new project

設定するレポジトリへの API アクセスと書き込みアクセス許可が必要です。 GitLab では、これは "maintainer" 以上のロールです。

アクセストークンを下記手順で使用する場合、 `api` スコープと `write_permissions` スコープを選択する必要があります。

. CircleCI Web アプリで、**Projects** に行き、 **Create Project** ボタンをクリックします。
. プロジェクト名を入力します。
. **Code Source** 下に、**OAuth** 経由、または **アクセストークン** を使って GitLab に接続するオプションがあります。 いずれかを選択してください。
+
NOTE: At this time, GitLab users on the Free tier can only use personal access tokens when setting up projects in CircleCI. See <<#gitlab-free-plans,Coming soon>> below for more details.
+
**OAuth 経由で GitLab に接続する** には、**Connect** ボタンをクリックします。 ブラウザーのウィンドウが開き、GitLab のサインインページに移動します。 GitLab で認証されたら、CircleCI の Create New Project ウィンドウにリダイレクトされます。
+
NOTE: 接続するには、OAuth での接続を再試行する必要がある場合があります。
+
緑色のチェックマークと "CircleCI will listen to your code source for changes." が表示されたら GitLab への接続は成功です。 GitLab リポジトリのドロップダウンリストも表示されます。
+
image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-connect-oauth.png[Successful GitLab connection via OAuth]
+
**アクセストークンを使って接続する** には、フィールドにアクセストークンを入力し、**Connect** ボタンをクリックします。 パーソナルアクセストークンまたはプロジェクトアクセストークンを使用できます。 プロジェクトアクセストークンは、特定の GitLab サブスクリプションやライセンス階層でのみ使用できます。 詳細については、GitLab の https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html[Personal Access Tokens] と https://docs.gitlab.com/ee/user/project/settings/project_access_tokens.html[Project Access Tokens] を参照してください。
+
"Access token successful" というメッセージが表示されたら GitLab への接続は成功です。 GitLab リポジトリのドロップダウンリストも表示されます。 セットアップできるリポジトリは、ご使用のパーソナル/プロジェクトアクセストークンに関連づけられてるものによって異なります。
+
image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-connect-token.png[Successful GitLab connection using access token]
. 設定するリポジトリを選択し、**Create Project** をクリックします。

裏では、CircleCI が GitLab リポジトリ内に Webhook を登録しています。 これは、プロジェクトの作成に成功すると、リポジトリの Settings > Webhooks に移動し、確認することができます。

[#step-three-trigger-pipeline]
== 3. Trigger a project pipeline in CircleCI

現時点では、新しい GitLab プロジェクトを設定しても、パイプラインは自動的にトリガーされません。 また、CircleCI 設定ファイルを CircleCI Web アプリ内で追加または編集することもできません。

. まだお済みでない場合は、GitLab リポジトリの一番上で `.circleci` ディレクトリを作成し、そのディレクトリに `config.yml` ファイルを追加します。
+
NOTE: CircleCI を初めて利用される方は、<hello-world#echo-hello-world-on-linux#,Hello World>サンプルを使って始めることも、<<sample-config#,サンプル設定ファイル>> をご覧いただくことをお勧めします。 <<configuration-reference#,CircleCI の設定>> では、`.circleci/config.yml` で使われるキーをすべて参照することができます。
. GitLab リポジトリに変更をプッシュします。 CircleCI Web アプリでプロジェクトのパイプラインが実行されているはずです。
+
image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-successful-pipeline.png[Successful pipeline run]

[#project-settings]
== プロジェクト設定

Unlike GitHub or Bitbucket projects, the GitLab integration introduces the concept of "standalone" projects that are not specific to a VCS.

プロジェクトには 1 つまたは複数の **設定ファイル** を含めることができます。設定ファイルとは、リポジトリ内の `.circleci/config.yml` ファイルをはじめとする、パイプラインの定義です。

プロジェクトには 1 つまたは複数の **トリガー** を含めることができます。トリガーとは、VCS をはじめとする、変更ソースからのイベントです。 トリガーによってパイプラインの開始に使用する設定ファイルが決まります。

下記の設定は、プロジェクト内で **Project Settings** ボタンをクリックすると表示されます。 現時点では、設定ファイルもトリガーも GitLab に限定されています。 プロジェクトで有効化できるその他の設定については、<<settings#,設定>>　のドキュメントを参照してください。

[#project-settings-active-development]
=== 積極的に開発が進められているプロジェクト設定

[#configuration]
==== 設定ファイル

現在、プロジェクトの設定ソースを追加または削除することができます。 上記の手順で GitLab を接続したお客様は、GitLab の設定ソースが自動的に追加されています。 設定ソースを定義すると、その設定ファイルを参照するトリガーをセットアップできます。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-project-settings-configuration.png[Configuration setup page]

[#triggers]
==== トリガー

パイプラインを開始する設定ソースを指定するトリガーを追加します。 上記の手順で GitLab を接続したお客様は、GitLab を設定ソースとして設定されたトリガーが自動的に追加されています。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-project-settings-triggers.png[Trigger setup page]

トリガーとトリガールールにより、CircleCI が変更ソース (この場合はGitLab) からのイベントをどのように処理するかが決まります。

トリガーが作成されると、CircleCI は GitLab に Webhook を登録します。 GitLab からのプッシュイベントは CircleCI に送信されます。 CircleCI はその後、イベントデータを使って、パイプラインを実行すべきかどうかを決定し、実行する場合、どのパイプラインを実行すべきかを決定します。

設定ソースに加えて、各トリガーには Webhook の URL や、このシナリオでは、CircleCI が作成した GitLab トークンも含まれます。 GitLab レポジトリからプッシュイベントを受信するには、GitLab 内で Webhook URLと GitLab トークンを使用して、Webhook をセキュアに登録します。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-project-settings-edit-trigger.png[Trigger details]



**トリガーのフィルタリング** により、Gitlab の Webhook が提供するパラメーターに基づき、トリガーがビルドを開始するタイミングを決定できます。 CircleCI では、一般的なオプションを提供しており、例えば、ビルドはマージリクエストに基づいてのみ行い、フィルタリングのカスタマイズオプションを使って独自のルールを作成することも可能です。 フィルタリングのカスタマイズにより、例えば特定のブランチやユーザーにのみビルドすることができます。

image::{{site.baseurl}}/assets/img/docs/gl-preview/gitlab-preview-project-settings-customize-triggers.png[Trigger details]

NOTE: Please also note the differences in functionality with the project settings below for GitLab support.

[#project-settings-advanced]
=== **高度な設定**

- CircleCI でセットアップ ワークフローを使って、ダイナミックコンフィグを有効化できます。 ダイナミックコンフィグに関する詳細は、<<dynamic-config#,ダイナミックコンフィグ>> ガイドをお読みください。
- 現時点では、**Free and Open Source** 設定はサポートされていませんが、今後提供予定です。
- 現時点では、冗長ワークフローの自動キャンセルはサポートされていません。 詳細については、ジョブやワークフローのスキップやキャンセルに関するドキュメントの <<skip-build#auto-cancelling,自動キャンセルのセクション>>  を参照してください。

[#project-settings-ssh-keys]
=== **SSH キー**

プロジェクトを作成すると、 SSH キーが作成され、リポジトリからコードをチェックアウトする際にに使用されます。 作成した設定ファイルごとに、その設定ファイルに関連づけられたリポジトリのコードにアクセスするための新しい SSH キーが生成されます。 現時点では、GitLab プロジェクトには **Additional SSH Keys (追加 SSH キー)** のみが適用されます。 SSH キーに関する詳細は、<<add-ssh-key#,CircleCI への SSH キーの追加>> をご覧ください。

[#organization-settings]
== 組織設定

The GitLab integration also introduces the concept of "standalone" organizations, which are not tied to a VCS.

スタンドアロン組織は、VCS に関係なくユーザーやプロジェクトを管理することができます。 組織やユーザーは、CircleCI の組織やユーザーとみなされ、VCS で定義づけられたロールや権限に依存せず、独自のロールや権限を持ちます。

組織レベルで設定を管理するには、CircleCI Web アプリの **Organization Settings** ボタンをクリックします。 CircleCI の組織設定に関する一般的な情報は、<<settings#,設定>> を参照してください。

[#organization-settings-people]
=== チーム

ユーザーを追加または削除し、組織のユーザーロールやユーザーの招待を管理します。

NOTE: 少なくとも１名の組織管理者が必要です。 最後の組織管理者を削除しようとすると、エラーになります。

[#inviting-your-first-team-members]
==== 最初のチームメンバーを招待する

新しい組織を作成したら、オプションでダッシュボードからチームメンバーを招待できます。 または、 **Organization Settings** の **People** のセクションからチームメンバーを招待することも可能です。

image::{{site.baseurl}}/assets/img/docs/gl-preview/gitlab-preview-org-settings-people.png[People section under Organization Settings]

. **Invite** ボタンをクリックします。
. 招待したいユーザーのメールアドレスを入力し、適切なロールを選択します。 複数のユーザーに同じロールをアサインする場合は、複数のアドレスを同時に入力できます。
+
現時点では、組織管理者ロールと組織コントリビューターロールが使用できます。 プロジェクト固有のロールも間もなく追加されます。 ロールや権限の詳細については、<<#about-roles-and-permissions,次のセクション>> を参照してください。
. 招待されたユーザーは、招待を受けるためのリンクが含まれたメール通知 (`noreply@circleci.com` から送信) を受け取ります。
+
ユーザーが CircleCI アカウントをお持ちでない場合は、登録する必要があります。 既に CircleCI アカウントをお持ちの場合、ユーザーは組織に追加されます。ユーザーがログインすると、Web アプリの左上にある組織切替メニューにその組織がオプションとして表示されます。

[#about-roles-and-permissions]
==== ロールと権限について

CircleCI users have different abilities depending on assigned roles in a particular organization.

Your CircleCI user roles and permissions are not derived from your VCS permissions, and they do not allow you to bypass permissions in the VCS. For example, you may be an _Organization Administrator_ within CircleCI, which gives you access to view and modify organization and project settings _within your CircleCI organization_. However, you will not be able to edit a project’s `.circleci/config.yml` hosted in your VCS without your user also having the write permissions _within that VCS's repository project_. Your CircleCI user’s VCS permissions are determined by its associated GitLab identity.

At this time, your GitLab identity can be managed through your CircleCI connection when managing triggers and configuration.

[#permissions-matrix]
===== 権限の一覧表

[.table.table-striped]
[cols=4*, options="header"]
|===
|ACTIONS
|ORGANIZATION ROLES

|
|*Admin*
|*Contributor*
|*Viewer*

|*Organization*
|
|
|

^|Manage org settings
|icon:check-circle[]
^|
^|

^|View org settings
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|Manage plan
|icon:check-circle[]
^|
^|

^|View plan
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

|*インサイト*
|
|
|

^|View org insights
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

|*Runner*
|
|
|

^|Manage runners
|icon:check-circle[]
^|
^|

^|View runners
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

|*Projects*
|
|
|

^|Manage project settings
|icon:check-circle[]
^|
^|

^|View projects
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

|*Contexts*
|
|
|

^|コンテキストの管理
|icon:check-circle[]
^|
^|

^|View contexts
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|Use contexts
|icon:check-circle[]
^|icon:check-circle[]
^|

|*Orbs*
|
|
|

^|Manage namespace
|icon:check-circle[]
^|
^|

^|Update orb categorizations
|icon:check-circle[]
^|
^|

^|Create/update orb
|icon:check-circle[]
^|
^|

^|Publish orb
|icon:check-circle[]
^|
^|

^|Publish dev orb
|icon:check-circle[]
^|icon:check-circle[]
^|

^|View private orb
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]
|===

[#user-settings]
== User settings (ユーザー設定)

[#user-account-integrations]
=== アカウントの連携

In the **User Settings** section of your CircleCI user profile, you have the ability to enable multiple account integrations.

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-account-integrations.png[User account integrations page]

When you have connected a GitLab account, clicking **Connect** for an additional account integration (e.g. GitHub, Bitbucket) will display the following modal:

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-connect-to-github-modal.png[Connect to GitHub modal]

Once you click **Connect** in the modal, your CircleCI accounts are merged. You will be disconnected from previously connected GitLab (i.e. standalone) organizations and will need to rejoin them. The disconnection ensures the security of your GitLab organizations as well as your other account integrations.

To rejoin those organizations, you will need to be re-invited through the process as described earlier in the <<#inviting-your-first-team-members,Inviting your first team members>> section.

The ability to connect to multiple account integrations on CircleCI allows you to:

- Easily access all source controls on your account
- Use all authentication methods available on CircleCI

[#pipeline-values]
== パイプライン値

GitLab-based triggers provide access to additional pipeline values. For more information on using pipeline values and parameters in CircleCI, refer to the <<pipeline-variables#,Pipeline Values and Parameters>> document.

[.table.table-striped]
[cols=2*, options="header"]
|===
|名前
|説明

|`pipeline.trigger_parameters.circleci.trigger_id`
|ID of the trigger that received the event

|`pipeline.trigger_parameters.circleci.config_source_id`
|ID for the configuration source

|`pipeline.trigger_parameters.circleci.trigger_type`
|GitLab

|`pipeline.trigger_parameters.circleci.event_time`
|Timestamp CircleCI received the event

|`pipeline.trigger_parameters.circleci.event_type`
|Push, pull request, manual, etc.

|`pipeline.trigger_parameters.circleci.project_id`
|CircleCI project ID

|`pipeline.trigger_parameters.circleci.actor_id`
|CircleCI user ID

|`pipeline.trigger_parameters.gitlab.type`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.project_id`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.ref`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.checkout_sha`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.user_id`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.user_name`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.user_username`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.user_avatar`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.repo_name`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.repo_url`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.web_url`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.commit_sha`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.commit_title`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.commit_message`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.commit_timestamp`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.commit_author_name`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.commit_author_email`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.total_commits_count`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.branch`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.default_branch`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.x_gitlab_event_id`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].

|`pipeline.trigger_parameters.gitlab.is_fork_merge_request`
|See Gitlab documentation for https://docs.gitlab.com/ee/user/project/integrations/webhooks.html[webhooks] and https://docs.gitlab.com/ee/user/project/integrations/webhook_events.html[webhook events].
|===

[#deprecated-system-environment-variables]
== Deprecated system environment variables

GitLab-based projects do not have the following system environment variables available. If your pipelines need these environment variables, we recommend you use suitable replacements from the available <<#pipeline-values,pipeline values>>.

[.table.table-striped]
[cols=2*, options="header"]
|===
|名前
|説明

|`CI_PULL_REQUESTS`
|Comma-separated list of URLs of the current build’s associated pull requests.

|`CI_PULL_REQUEST`
|関連付けられたプル リクエストの URL。 ひも付けられたプルリクエストが複数ある時は、そのうちの 1 つがランダムで選ばれます。

|`CIRCLE_PR_NUMBER`
|関連付けられた GitHub または Bitbucket プル リクエストの番号。 フォークしたプルリクエストのみで使用可能です。

|`CIRCLE_PR_USERNAME`
|プル リクエストを作成したユーザーの GitHub または Bitbucket ユーザー名。 フォークしたプルリクエストのみで使用可能です。

|`CIRCLE_PR_REPONAME`
|プル リクエストが作成された GitHub または Bitbucket リポジトリの名前。 フォークしたプルリクエストのみで使用可能です。

|`CIRCLE_PROJECT_USERNAME`
|現在のプロジェクトの GitHub または Bitbucket ユーザー名。

|`CIRCLE_PROJECT_REPONAME`
|現在のプロジェクトのリポジトリの名前。

|`CIRCLE_REPOSITORY_URL`
|GitHub または Bitbucket リポジトリ URL。

|`CIRLCE_SHA1`
|現在のビルドの前回のコミットの SHA1 ハッシュ。

|`CIRCLE_TAG`
|git タグの名前 (現在のビルドがタグ付けされている場合)。 For more information, see the <<workflows#executing-workflows-for-a-git-tag,Git Tag Job Execution section>> of the Using Workflows to Schedule Jobs document.
|===

If you must use these as environment variables in your pipelines, you can do so by <<env-vars#environment-variable-usage-options,using the `environment` key>> in your configuration and providing your own mappings:

```yaml
build:
  docker:
    - image: cimg/node:17.0
  environment:
    CIRCLE_PROJECT_REPONAME: << pipeline.trigger_parameters.gitlab.repo_name >>
  steps:
    - run: echo $CIRCLE_PROJECT_REPONAME
```

[#coming-soon]
== 近日公開予定

The following sections are features of CircleCI which are not currently fully supported for GitLab. These features are planned for future releases.

[#account-integrations]
=== アカウントの連携

There is currently no method to manage the connection with GitLab outside of the project setup, trigger, and configuration settings. CircleCI is working on enabling users to manage their users’ GitLab identity as part of their user profile's account integration settings.

[#project-roles]
=== プロジェクトのロール

Provider roles give even greater control over which users have access to which projects within an organization. This enables teams to have limited access to only their projects, while managers and others can have broader organizational access.

[#auto-cancel-redundant-workflows]
=== 冗長ワークフローの自動キャンセル

Auto-cancel redundant workflows is not currently supported. It is often used to remove noise from the pipeline page and lower the time to feedback for a commit. Refer to the xref:/skip-build#auto-cancelling[Skip or cancel jobs and workflows] page for more details.

[#restricted-access-to-contexts]
=== コンテキストへのアクセス制限

Restricted access to contexts is not currently supported. Any users that can trigger pipelines from the source can use contexts. We will be offering multiple methods to restrict contexts in the future.

If you would like more information about using contexts within CircleCI, visit the xref:/contexts#[Using contexts] page.

[#passing-secrets-to-forked-pull-requests]
=== Passing secrets to forked pull requests

Passing secrets to forked pull requests is not a currently supported option for GitLab integrations.

[#stop-building]
=== Stop building

GitLab integrations do not currently support the **Stop Building** option that can normally be found in **Project settings**. CircleCI パイプラインの実行を停止したい場合は、GitLab リポジトリの Webhook を削除することを推奨します。

[#ssh-rerun]
=== SSH rerun

Support for SSH rerun will only work if your user account has a Bitbucket or GitHub integration in addition to GitLab. Your user account's Bitbucket or GitHub SSH keys can be used for SSH reruns with GitLab. CircleCI will be adding functionality to allow users to manage SSH keys so SSH reruns are possible. SSH reruns do not get passed context secrets. CircleCI is working on providing administrators with greater control over the use of secrets and SSH reruns.

[#additional-ssh-keys-only]
=== 追加 SSH キーのみ

Deploy keys and user keys are not used by GitLab integrations. GitLab keys are stored in **Project Settings > Additional SSH Keys**. However, CircleCI does not recommend manually managing your SSH keys for code checkout. Instead, use the **Set Up Project** option, or **Project Settings > Configuration**, to maintain connections to your repository.

[#free-and-open-source-setting]
=== Free and open source setting

Open source plans are not currently available to GitLab customers. CircleCI will keep the open source community up to date as work continues to support this.

[#plan-pages-ui]
=== Plan pages UI

The plan pages currently display the organization UUID instead of the organization name in the top left corner when viewing the **Plan** section.

[#gitlab-free-plans]
=== GitLab free plans

If your GitLab account supports it, CircleCI will create a GitLab project token whenever possible when setting up a project. If you are on a Free GitLab plan it is not possible to create a project token, so CircleCI will require and use a personal API token. Please note, if you are on a paid plan and enter a personal API token during project setup, CircleCI will use your personal API token to create a project token.