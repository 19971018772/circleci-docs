---

contentTags:
  platform:
  - クラウド
redirect_from: /ja/gitlab-vcs-support
---
= GitLab.com との連携
:page-layout: classic-docs
:page-liquid:
:page-description: GitHub と CircleCI の連携方法について説明します。
:icons: font
:toc: macro

:toc-title:

[#overview]
== 概要

このドキュメントでは、GitLab プロジェクトと CircleCI の連携について説明し、 CI/CD パイプラインを管理するための新しいコンセプトや方法を紹介します。 また、リリース予定の機能の概要もご紹介します。

[#sign-up]
== ユーザー登録

GitLab との連携は、新規および既存の CircleCI ユーザーに行っていただけます。 xref:first-steps#gitlab-signup[CircleCI のユーザー登録] のページに記載されている手順に従ってください。

NOTE: 設定するレポジトリへの API アクセスと書き込みアクセス権が必要です。 GitLab では、これは "maintainer" 以上のロールです。

[.tab.signup.GitLab_SaaS]
--
When you create a new organization and connect your GitLab.com account, you will be prompted to create a new project from a repository. You may select a repo in which you have already created a `.circleci` directory at the root of the repo, with a `config.yml` file in that directory.

If your selected repo does _not_ already have a `.circleci/config.yml`, you will be presented with the following options to set up a CircleCI configuration for your project:

* **Fastest**: Use an existing `config.yml` in one of your repos.
+
You can select _another_ repository in your account that has previously been set up with a CircleCI configuration. The `.circleci/config.yml` file may be in the main branch, or a feature branch. The config is imported into your new project--CircleCI automatically creates a new branch and adds a commit for you.
* **Faster**: Commit a starter CI pipeline to a new branch.
+
CircleCI automatically creates a new branch and commits a basic configuration file. You may make further changes to the file afterwards in your GitLab repo.
* **Fast**: Use a `config.yml` template that you can edit and save.
+
You can choose a sample `.circleci/config.yml` to best fit your project from a variety of templates (for example, Node.js, Python, iOS apps). You can make changes to the file in CircleCI before saving. The config is committed on a new branch.

The first two options (**Fastest** and **Faster**) automatically trigger a pipeline once you create the project.
--

[.tab.signup.GitLab_Self-Managed]
--
You need:

* Your GitLab self-managed instance URL, for example, `https://test-gitlab.circleci.com`.
+
Your self-managed instance must already contain at least one GitLab project. The authorization attempt will be unsuccessful if your instance does not have any projects.  Note that the self-managed instance must be accessible via the public internet, **it cannot be behind a firewall**.
* A link:https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html[personal access token]. This token must have the `api` scope.

[#known-hosts-input]
* Your instance's SSH public host keys. You can retrieve this from your instance by running `ssh-keyscan <instance_url>`, for example, `ssh-keyscan test-gitlab.circleci.com`, and copying the command's output.
+
The output should look something like:
+
```shell
➜  ~ ssh-keyscan test-gitlab.circleci.com

# gitlab.com:22 SSH-2.0-GitLab-SSHD
gitlab.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCsj2bNKTBSpIYDEGk9KxsGh3mySTRgMtXL583qmBpzeQ+jqCMRgBqB98u3z++J1sKlXHWfM9dyhSevkMwSbhoR8XIq/U0tCNyokEi/ueaBMCvbcTHhO7FcwzY92WK4Yt0aGROY5qX2UKSeOvuP4D6TPqKF1onrSzH9bx9XUf2lEdWT/ia1NEKjunUqu1xOB/StKDHMoX4/OKyIzuS0q/T1zOATthvasJFoPrAjkohTyaDUz2LN5JoH839hViyEG82yB+MjcFV5MU3N1l1QL3cVUCh93xSaua1N85qivl+siMkPGbO5xR/En4iEY6K2XPASUEMaieWVNTRCtJ4S8H+9
# gitlab.com:22 SSH-2.0-GitLab-SSHD
gitlab.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBFSMqzJeV9rUzU4kWitGjeR4PWSa29SPqJ1fVkhtj3Hw9xjLVXVYrU9QlYWrOLXBpQ6KWjbjTDTdDkoohFzgbEY=
# gitlab.com:22 SSH-2.0-GitLab-SSHD
gitlab.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAfuCHKVTjquxvt6CM6tdG4SLp1Btn/nOeHHE5UOzRdf
# gitlab.com:22 SSH-2.0-GitLab-SSHD
# gitlab.com:22 SSH-2.0-GitLab-SSHD
```

Follow the steps on the **Create New Project** page:

image::{{site.baseurl}}/assets/img/docs/gl-sm-create-project.png[Create a new project in a self-managed org]

. Enter your self-managed instance URL. The field will automatically append `/api/v4`, so the URL that CircleCI uses to connect to your account looks something like `https://test-gitlab.circleci.com/api/v4`. Click **Verify**.
. Enter your personal access token. Click **Connect**.
. Copy and paste the SSH host key from your self-managed instance into **known_hosts**. Click **Connect**.
. Once your account is successfully authorized, select the repository for your CircleCI project, and enter a project name.
. Finally, click **Create Project**. You will then be redirected to the newly-created project's Pipelines page.

The express CircleCI configuration setup is not currently available for GitLab Self-managed projects. You will need to add a `.circleci/config.yml` file in your repository if it has not yet been set up. If the repository you selected already contains a `.circleci/config.yml`, you will need to save a commit in the repo to see your pipeline on the dashboard.
--

NOTE: If you are new to CircleCI, you may wish to get started with our xref:hello-world#[Hello world] example, or take a look at some of our xref:sample-config#[sample configurations] that demonstrate different types of workflows. xref:configuration-reference#[CircleCI の設定] では、`.circleci/config.yml` で使われるキーをすべて参照できます。

リポジトリと CircleCI プロジェクトを接続すると、裏では CircleCI がお客様の GitLab リポジトリ内で Webhook を登録します。 これは、プロジェクトの作成に成功後、リポジトリの **Settings > Webhooks** のページに移動して確認することができます。

The following limits are currently in place for GitLab integrations:

- 各ユーザーが作成できる組織は最大 3 つです。
- Free プランでは、各組織が作成できるプロジェクトは最大 10 個です。

組織やプロジェクトを追加する必要がある場合は、 xref:plan-overview.adoc[有料プラン] へのアップグレードをご検討いただくか、または link:https://support.circleci.com/hc/ja/requests/new[サポートチーム] にお問い合わせください。

[#trigger-pipeline]
== CircleCI でパイプラインをトリガーする

[.tab.pipeline.GitLab.com]
--
When you create a new project using the **Fastest** (use an existing `config.yml`) or **Faster** (commit a starter CI pipeline) options described in the section above, a pipeline is automatically triggered. You should see the pipeline running shortly after you are taken to the CircleCI dashboard.

If you use the **Fast** config setup, the pipeline is not triggered until you save the `.circleci/config.yml` by clicking the **Commit and Run** button in the web app.
--

[.tab.pipeline.GitLab_Self-Managed]
--
If you have not already done so, add a `.circleci` directory to the root of the repository, then add a `config.yml` file in that directory.

When you commit this change in your repository, you should see the pipeline trigger for the first time on the CircleCI dashboard.
--

Each time you push changes to your GitLab repository, a new pipeline is triggered and you should see it running for the project within the CircleCI web app.

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-successful-pipeline.png[Successful pipeline run]

Editing an existing CircleCI configuration within the web app is not currently available. You may make further changes to the config in your GitLab repo.

Committing further changes in your repo will automatically trigger a pipeline. However, manually triggering a pipeline from the CircleCI web app is also not available at this time.

[#project-settings]
== プロジェクト設定

GitHub プロジェクトや Bitbucket プロジェクトとは異なり、GitLab の連携では、一つの VCS に固有ではない「スタンドアロン」プロジェクトというコンセプトが導入されています。

プロジェクトには 1 つまたは複数の **設定ファイル** を含めることができます。設定ファイルとは、リポジトリ内の `.circleci/config.yml` ファイルをはじめとする、パイプラインの定義です。

プロジェクトには 1 つまたは複数の **トリガー** を含めることができます。トリガーとは、VCS をはじめとする、変更ソースからのイベントです。 トリガーによってパイプラインの開始に使用する設定ファイルが決まります。

プロジェクト内で **Project Settings** ボタンをクリックすると、以下の設定が表示されます。 現時点では、設定ファイルもトリガーも GitLab に限定されています。

[#people]
=== People

プロジェクトのロールにより、組織内でどのユーザーがどのプロジェクトにアクセスできるかをさらに細かく制御できます。 チームには自分たちのプロジェクトのみへのアクセス権を付与し、一方管理者などには組織のより広いアクセス権を付与することができます。 アクセス権のオプションは以下の通りです。

* Admin: プロジェクトや全設定の読み取りと書き込みアクセス権と他のユーザーのアクセス権の管理
* Contributor: プロジェクトや一部の設定の読み取りと書き込みアクセス権
* Viewer: プロジェクトや一部の設定の読み取りアクセス権のみ

すべての権限のリストは、 <<roles-and-permissions,Roles and permissions>> のセクションをご確認ください。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-project-settings-project-roles.png[Project roles setup page]

[#configuration]
=== 設定

この時点で、プロジェクトの設定ソースを追加または削除することができます。 上記の手順で GitLab を接続したお客様は、GitLab の設定ソースが自動的に追加されています。

For GitLab Self-managed, you are able to select any instance that you have previously added as a configuration source. If you wish to set a different feature branch or repository from a self-managed instance as a new configuration source, you will first need to add a new connection via your xref:#organization-settings-integrations[**Organization Settings**]. In either case, you will also need to enter your personal access token again to authorize this connection.

設定ソースを定義すると、その設定ファイルを参照するトリガーをセットアップできます。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-project-settings-configuration.png[Configuration setup page]

[#triggers]
=== トリガー

**現時点ではパイプラインのスケジュール実行機能は、GitLab では使用できません。** GitLab のトリガーについては以下をお読みください。フィルタリング機能を使って特定の条件に基づいてパイプラインをトリガーする方法も紹介します。

パイプラインを開始する設定ソースを指定するトリガーを追加します。 上記の手順で GitLab を接続したお客様は、GitLab を設定ソースとして設定されたトリガーが自動的に追加されています。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-project-settings-triggers.png[Trigger setup page]

トリガーとトリガールールにより、CircleCI が変更ソース (この場合はGitLab) からのイベントをどのように処理するかが決まります。

トリガーが作成されると、CircleCI は GitLab に Webhook を登録します。 GitLab からのプッシュイベントは CircleCI に送信されます。 CircleCI はその後、イベントデータを使って、パイプラインを実行すべきかどうかを決定し、実行する場合、どのパイプラインを実行すべきかを決定します。

設定ソースに加えて、各トリガーには Webhook の URL や、このシナリオでは、CircleCI が作成した GitLab トークンも含まれます。 GitLab レポジトリからプッシュイベントを受信するには、GitLab 内で Webhook URLと GitLab トークンを使用して、Webhook をセキュアに登録します。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-project-settings-edit-trigger.png[Trigger details]



**トリガーのフィルタリング** により、Gitlab の Webhook が提供するパラメーターに基づき、トリガーがビルドを開始するタイミングを決定できます。 CircleCI では、一般的なオプションを提供しており、例えば、ビルドはマージリクエストに基づいてのみ行い、フィルタリングのカスタマイズオプションを使って独自のルールを作成することも可能です。 フィルタリングのカスタマイズにより、例えば特定のブランチやユーザーにのみビルドすることができます。

image::{{site.baseurl}}/assets/img/docs/gl-preview/gitlab-preview-project-settings-customize-triggers.png[Trigger details]

NOTE: GitLab 連携では、以下のプロジェクト設定の機能の違いにも注意してください。

[#project-settings-advanced]
=== 高度な設定

- CircleCI でセットアップ ワークフローを使って、ダイナミックコンフィグを有効化できます。 ダイナミックコンフィグに関する詳細は、xref:dynamic-config#[ダイナミックコンフィグ]ガイドをお読みください。
- 現時点では、**Free and Open Source** 設定はサポートされていませんが、今後提供予定です。
- 現時点では、冗長ワークフローの自動キャンセルはサポートされていません。 詳細については、ジョブやワークフローのスキップやキャンセルに関するドキュメントの xref:skip-build#auto-cancelling[自動キャンセルのセクション]  を参照してください。

[#project-settings-ssh-keys]
=== SSH キー

プロジェクトを作成すると、 SSH キーが作成され、リポジトリからコードをチェックアウトする際にに使用されます。 作成した設定ファイルごとに、その設定ファイルに関連づけられたリポジトリのコードにアクセスするための新しい SSH キーが生成されます。 現時点では、GitLab プロジェクトには **Additional SSH Keys (追加 SSH キー)** のみが適用されます。

[#create-gitlab-ssh-key]
==== GitLab SSH キーを作成

. link:https://docs.gitlab.com/ee/user/ssh.html[GitLab の説明] に従って、SSH キーペアを作成します。 パスワードを入力するよう求められた場合、**入力しないでください**（以下はmacOSでキーを生成するコマンドの一例です）。
+
```shell
  ssh-keygen -t ed25519 -C "your_email@example.com"
```
. link:https://gitlab.com/[GitLab]のプロジェクトにアクセスし、**Settings > Repository**に移動し、**Deploy keys**セクションを展開してください。 Title フィールドにタイトルを入力し、手順 1 で作成したパブリックキーをコピー＆ペーストします。 **Grant write permissions to this key**にチェックを入れ、**キーを追加(Add Key)**をクリックします。
. CircleCI アプリのプロジェクトの設定にアクセスし、**SSH Keys** と **Add SSH key** を選択します。 Hostname のフィールドには、`gitlab.com` を入力し、手順 1 で作成したプライベートキーを追加します。 次に **Add SSH Key** をクリックします。
. `.circleci/config.yml` ファイルで、`add_ssh_keys` キーを使用してジョブにフィンガープリントを追加します。
+
```yaml
  version: 2.1

  jobs:
    deploy-job:
      steps:
        - add_ssh_keys:
            fingerprints:
              - "SO:ME:FIN:G:ER:PR:IN:T"
```

ジョブから GitHub リポジトリにプッシュすると、CircleCI は追加された SSH キーを使用します。

SSH キーに関する詳細は、 xref:add-ssh-key#[CircleCI への SSH キーの追加] をご覧ください。

[#organization-settings]
== 組織設定

GitLab の連携では、特定の VCS に関連づけられない「スタンドアロン」組織のコンセプトも導入されています。

スタンドアロン組織は、VCS に関係なくユーザーやプロジェクトを管理することができます。 組織やユーザーは、CircleCI の組織やユーザーとみなされ、VCS で定義づけられたロールや権限に依存せず、独自のロールや権限を持ちます。

組織レベルで設定を管理するには、CircleCI Web アプリの **Organization Settings** ボタンをクリックします。

[#organization-settings-people]
=== People

ユーザーを追加または削除し、組織のユーザーロールやユーザーの招待を管理します。

NOTE: 少なくとも１名の組織管理者が必要です。 最後の組織管理者を削除しようとすると、エラーになります。

[#inviting-your-first-team-members]
==== 最初のチームメンバーを招待する

新しい組織を作成したら、オプションでダッシュボードからチームメンバーを招待できます。 または、 **Organization Settings** の **People** のセクションからチームメンバーを招待することも可能です。

image::{{site.baseurl}}/assets/img/docs/gl-preview/gitlab-preview-org-settings-people.png[People section under Organization Settings]

. **Invite** ボタンをクリックします。
. 招待したいユーザーのメールアドレスを入力し、適切なロールを選択します。 複数のユーザーに同じロールをアサインする場合は、複数のアドレスを同時に入力できます。
+
現時点では、組織管理者ロールと組織コントリビューターロールが使用できます。 プロジェクト固有のロールも間もなく追加されます。 For more information, refer to the <<#about-roles-and-permissions,Roles and permissions>> section.
. 招待されたユーザーは、招待を受けるためのリンクが含まれたメール通知 (`noreply@circleci.com` から送信) を受け取ります。
+
ユーザーが CircleCI アカウントをお持ちでない場合は、登録する必要があります。 既に CircleCI アカウントをお持ちの場合、ユーザーは組織に追加されます。ユーザーがログインすると、Web アプリの左上にある組織切替メニューにその組織がオプションとして表示されます。

[#organization-settings-integrations]
=== Integrations (GitLab Self-managed only)

For GitLab Self-managed organizations, you may connect additional self-managed instances to be integrated with your organization.

. Navigate to **Integrations** within **Organization Settings** to add a new instance.
+
image::{{site.baseurl}}/assets/img/docs/gl-sm-integrations.png[Add a new self-managed instance on the Integrations page]
. You will need to enter the instance URL, as described in the xref:#sign-up[Sign up] section above.

NOTE: The ability to edit or delete existing integrations is not currently supported.

For GitLab.com, account integrations can be managed under your xref:#user-account-integrations[user settings].

[#establish the authenticity of an SSH host]
==== SSH ホストの信頼性の確立

For GitLab self-managed instances, it is necessary to add the SSH host keys to a "known hosts" file (`~/.ssh/known_hosts`) so that CircleCI can verify that the host it is connecting to is authentic. The **known_hosts** input stores your instance's public host keys so CircleCI jobs can verify the remote host's identity when checking out code.

SSH keys for remote servers can be fetched by running `ssh-keyscan <host>`, for example, `ssh-keyscan test-gitlab.circleci.com`.

When retrieving the host keys, you can confirm that you have the correct key by checking its fingerprints. You can check the fingerprints found in the **Instance Configuration** section of your self-managed instance's Help pages (link:https://gitlab.com/help/instance_configuration#ssh-host-keys-fingerprints[this Instance Configuration page] shows an example).

[#roles-and-permissions]
== ロールと権限

CircleCI のユーザーは、個々の組織で割り当てられたロールによって、可能な操作が異なります。

CircleCI ユーザーのロールと権限は、VCS の権限から派生するものではありません。また、VCS の権限を無視することもできません。 たとえば、CircleCI の _Organization Administrator (組織の管理者)_ である場合、CircleCI 組織内の組織とプロジェクト設定の閲覧および変更が可能です。 しかし、VCS にホストされているプロジェクトの `.circleci/config.yml` ファイルを編集するには、VCS のリポジトリ内のプロジェクトに対して書き込みアクセス権が付与されている必要があります。 CircleCI ユーザーの VCS における権限は、関連づけられた GitLab のアイデンティティによって決まります。

現時点では、トリガーや設定ファイルを管理する際に CircleCI と接続することにより GitLab のアイデンティティを管理できます。

[#organization-role-permissions-matrix]
=== 組織のロールと権限のマトリックス

[.table.table-striped]
[cols=4*, options="header"]
|===
|アクション
|組織のロール

|
|*Admin*
|*Contributor*
|*Viewer*

|*組織*
|
|
|

^|名前空間の作成
|icon:check-circle[]
^|
^|

^|名前空間の管理
|icon:check-circle[]
^|
^|

^|組織設定の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|組織設定の管理
|icon:check-circle[]
^|
^|

^|組織のアクセス権の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|組織のアクセス権の管理
|icon:check-circle[]
^|
^|

^|組織の認証情報の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|組織のポリシーの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|組織のポリシーの管理
|icon:check-circle[]
^|
^|

^|組織の連携情報の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|組織の連携情報の管理
|icon:check-circle[]
^|
^|

^|組織のリリース情報の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|

^|組織の認証情報の管理
|icon:check-circle[]
^|
^|

^|組織の監査ログの閲覧
|icon:check-circle[]
^|
^|

^|プランの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|

^|プランの管理
|icon:check-circle[]
^|
^|

|*Insights*
|
|
|

^|組織の Insights の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

|*ランナー*
|
|
|

^|ランナーの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|ランナーの管理
|icon:check-circle[]
^|
^|

|*プロジェクト*
|
|
|

^|プロジェクトの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|プロジェクトの作成
|icon:check-circle[]
^|icon:check-circle[]
^|

^|プロジェクト設定の管理
|icon:check-circle[]
^|
^|

^|プロジェクトのバージョンの復元
|icon:check-circle[]
^|
^|

^|プロジェクトのカナリアの削除
|icon:check-circle[]
^|
^|

|*コンテキスト*
|
|
|

^|コンテキストの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|コンテキストの使用
|icon:check-circle[]
^|icon:check-circle[]
^|

^|コンテキストの変数の編集
|icon:check-circle[]
^|icon:check-circle[]
^|

^|コンテキストの管理
|icon:check-circle[]
^|
^|

|*Orb*
|
|
|

^|Orb の作成/更新
|icon:check-circle[]
^|
^|

^|プライベート Orb の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|開発版 Orb のパブリッシュ
|icon:check-circle[]
^|icon:check-circle[]
^|

^|Orb のパブリッシュ
|icon:check-circle[]
^|
^|

|*Webhook*
|
|
|

^|組織の Webhook の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|

^|組織の Webhook の管理
|icon:check-circle[]
^|
^|

^|プロジェクトの Webhook の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|

^|プロジェクトの Webhook の管理
|icon:check-circle[]
^|
^|

|*スケジュール*
|
|
|

^|スケジュールの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|スケジュールの編集
|icon:check-circle[]
^|
^|

|*トリガー*
|
|
|

^|トリガーの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|ビルドのトリガー
|icon:check-circle[]
^|icon:check-circle[]
^|

^|トリガーの編集
|icon:check-circle[]
^|
^|

|*設定ファイルソース*
|
|
|

^|設定ファイルソースの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|設定ファイルソースの編集
|icon:check-circle[]
^|
^|
|===

[#project-role-permissions-matrix]
=== プロジェクトのロールと権限のマトリックス

[.table.table-striped]
[cols=4*, options="header"]
|===
|アクション
|プロジェクトのロール

|
|*Admin*
|*Contributor*
|*Viewer*

|*プロジェクト*
|
|
|

^|プロジェクトの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|プロジェクトのアクセス権の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|プロジェクトの認証情報の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|プロジェクトのバージョンの復元
|icon:check-circle[]
^|icon:check-circle[]
^|

^|プロジェクトのカナリアの削除
|icon:check-circle[]
^|icon:check-circle[]
^|

^|プロジェクトの管理
|icon:check-circle[]
^|
^|

|*Webhook*
|
|
|

^|プロジェクトの Webhook の閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|プロジェクトの Webhook の管理
|icon:check-circle[]
^|
^|

|*スケジュール*
|
|
|

^|スケジュールの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|スケジュールの編集
|icon:check-circle[]
^|
^|

|*トリガー*
|
|
|

^|トリガーの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|ビルドのトリガー
|icon:check-circle[]
^|icon:check-circle[]
^|

^|トリガーの編集
|icon:check-circle[]
^|
^|

|*設定ファイルソース*
|
|
|

^|設定ファイルソースの閲覧
|icon:check-circle[]
^|icon:check-circle[]
^|icon:check-circle[]

^|設定ファイルソースの編集
|icon:check-circle[]
^|
^|
|===

[#user-settings]
== ユーザー設定

[#user-account-integrations]
=== アカウントの連携

CircleCI のユーザープロフィール内の **User Settings** セクションで、複数のアカウント連携を有効化できます。

image::{{site.baseurl}}/assets/img/docs/gl-ga/gitlab-ga-account-integrations.png[User account integrations page]

CircleCI で複数のアカウント連携ができることにより、以下が実現できます。

- アカウントの全てのソースコントロールに容易にアクセスする
- CircleCI で利用可能な全ての認証方法を使用する

[#deprecated-system-environment-variables]
== 非推奨のシステム環境変数

GitLab ベースのプロジェクトでは以下のシステム環境変数が使用できません。 VCS support for each environment variable is indicated in the xref:variables#built-in-environment-variables[Built-in environment variables] table on the Project values and variables page. If your pipelines need these environment variables, we recommend you use suitable replacements from the available xref:pipeline-variables#[pipeline values].

[#coming-soon]
== 近日公開予定

下記のセクションでは、GitLab 連携では現在はまだフルサポートされていない CircleCI の機能を紹介します。 これらの機能は、今後リリースされる予定です。

[#account-integrations]
=== アカウントの連携

現在、プロジェクト設定、トリガー、および設定ファイル以外に GitLab との接続を管理する方法はありません。 CircleCI では、ユーザープロフィール内の Account Integration の設定でユーザーの GitLab アイデンティティを管理できるよう取り組んでいます。

[#auto-cancel-redundant-workflows]
=== 冗長ワークフローの自動キャンセル

冗長ワークフローの自動キャンセルは、現時点ではサポートされていません。 この機能は、パイプラインのページからノイズを取り除き、コミットのフィードバックにかかる時間を短縮するためによく使用されます。 Refer to the xref:skip-build#auto-cancelling[Skip or cancel jobs and workflows] page for more details.

[#passing-secrets-to-forked-pull-requests]
=== フォークしたプルリクエストにシークレットを渡す

現在、GitLab 連携ではフォークしたプルリクエストにシークレットを渡すオプションはサポートされていません。

[#stop-building]
=== ビルドの停止

現在、GitLab 連携では **Stop Building** オプションをサポートしていません。(このオプションは通常は **Project settings** 内にあります。) CircleCI パイプラインの実行を停止したい場合は、GitLab リポジトリの Webhook を削除することを推奨します。

[#ssh-rerun]
=== SSH での再実行

SSH での再実行は、ユーザーのアカウントが GitLab に加えて Bitbucket または GitHub と連携している場合にのみサポートされます。 ユーザーアカウントの Bitbucket または GitHub の SSH キーは、GitLab の SSH での再実行に使用できます。 ユーザーが SSH キーを管理し、SSH 再実行ができるようにする機能を追加予定です。 SSH での再実行には、コンテキストシークレットは渡されません。 CircleCI では、管理者がシークレットの使用と SSH での再実行をより詳細に制御できるよう取り組んでいます。

[#additional-ssh-keys-only]
=== 追加 SSH キーのみ

GitLab の連携では、デプロイキーとユーザーキーは使用されません。 GitLab のキーは、 **Project Settings > Additional SSH Keys** に保存されます。 ただし、CircleCI はユーザーがコードのチェックアウトのための SSH キーを手動で管理することを推奨しません。 代わりに、 **Set Up Project** オプションまたは **Project Settings > Configuration** を使用し、リポジトリとの接続を維持して下さい。

[#free-and-open-source-setting]
=== Free とオープンソースの設定

現在、GitLab のお客様には、オープンソースプランはご利用いただけません。 CircleCI ではオープンソースコミュニティを最新の状態に保ち、将来的にはサポートを提供予定です。

[#next-steps]
== 次のステップ

- xref:config-intro#[設定ファイルのチュートリアル]
- xref:hello-world#[Hello world]