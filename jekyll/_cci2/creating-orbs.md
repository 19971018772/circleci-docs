---
layout: classic-docs
title: "Publishing Orbs"
short-title: "Publishing Orbs"
description: "Publishing Orbs to the Orb Registry"
categories: [getting-started]
order: 1
version:
- Cloud
---

* TOC
{:toc}

## Introduction

Once ready, a developer can publicly publish their orb to a [semantically versioned]({{site.baseurl}}/2.0/orb-concepts/#semantic-versioning) tag, and the orb will appear on the [Orb Registry](https://circleci.com/orbs/registry/).

## Orb Development Kit

If you are publishing your orb using the [Orb Development Kit]({{site.baseurl}}/2.0/orb-author/#orb-development-kit), publishing new semantic releases of your orb is simple. You can find a simplified version of the publishing process in the [README.md](https://github.com/CircleCI-Public/Orb-Project-Template/blob/master/README.md) file that was generated by the `circleci orb init` command.

### How To Issue A New Release

Issuing a new semantic release of your orb is easy. Once you have generated your orb sample project with the `circleci orb init` command, you will have been automatically been migrated to the `alpha` branch. The name of the branch does not matter, just ensure any new features, bug fixes, or patches, are created in a non-default branch for your repository. Once you have added your new code it is time to being the release process.

1) **Open a new Pull Request to the default branch**

New releases are only published on merges to the default branch. We make use of the included [`.circleci/config.yml` configuration](https://github.com/CircleCI-Public/Orb-Project-Template/blob/master/.circleci/config.yml) file to automatically [pack]({{site.baseurl}}/2.0/orb-concepts/#orb-packing), [test]({{site.baseurl}}/2.0/testing-orbs/), and publish our orbs.

2) **Ensure all tests are passing**

By default, both [integration tests]({{site.baseurl}}/2.0/testing-orbs/#integration-testing) and [unit tests]({{site.baseurl}}/2.0/testing-orbs/#unit-testing) are enabled for this CI pipeline. It is highly recommended that you add at minimum integration tests to ensure the functionality of your orb. If your orb does not make use of scripts or you do not wish to add unit testing at this time, the [bats/run](https://github.com/CircleCI-Public/Orb-Project-Template/blob/0354adde8405564ee7fc77e21335090a080daebf/.circleci/config.yml#L49) job can be commented out.

[image]

3) **Title Pull Request with Special Semver Tag**

The included CI config utilizes the [orb-tools orb](https://circleci.com/orbs/registry) to automatically publish orbs which pass testing on the main branch, if the commit message contains a special tag designating the type of [semver]({{site.baseurl}}/2.0/orb-concepts/#semantic-versioning) release we are intending.

The tag template looks as such: `[semver:<increment>]` where `<increment>` is replaced with one of the following values:

| Increment | Description|
| ----------| -----------|
| major     | Issue a 1.0.0 incremented release|
| minor     | Issue a x.1.0 incremented release|
| patch     | Issue a x.x.1 incremented release|
| skip      | Do not issue a release|
{: class="table table-striped"}

So for example, to release the first major public version of your orb from the `beta` branch, your pull request may be titled `[semver:major] first orb release.`

[image]

4) **"Squash" Merge**

Performing a [squash](https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-request-merges#squash-and-merge-your-pull-request-commits) merge not only condenses the branch into a single commit when merging into the default branch, it also by convention keeps the title of the Pull Request, as the commit message.

[image]

The important piece is to ensure when merging to the default branch, to include the semver tag in the commit message.

5) **Complete!**

If you head on over to the [CircleCI app](https://app.circleci.com/) you can view the progress of your orb publishing pipeline. When the pipeline has complete you can search your orb on the [Orb Registry](https://circleci.com/orbs/registry/).

### How It Works

If you want to dive deeper into the Orb Development Kit and get a look at how the components work together to publish your orb, this section is for you.

The [circleci orb init]({{site.baseurl}}/2.0/orb-author/#getting-started) command is responsible for cloning a customizing an [orb template repository](https://github.com/CircleCI-Public/Orb-Project-Template) for your orb, including a pre-written CircleCI configuration file designed with our optimal orb development pipeline.

Included in the [/.circleci](https://github.com/CircleCI-Public/Orb-Project-Template/tree/master/.circleci) directory is a README with a breakdown of the included workflows.

Your orb pipeline occurs in two workflows:
* [test-pack](#test-pack)
* [integration-test_deploy](#integration-test_deploy)

#### test-pack

This workflow is the first of two workflows to run, and will execute any time code is committed to the repository for any branch. You can view [this workflow in the template project here](https://github.com/CircleCI-Public/Orb-Project-Template/blob/0354adde8405564ee7fc77e21335090a080daebf/.circleci/config.yml#L40).

The `test-pack` workflow is responsible for all testing we can accomplish up until a development version of an orb is to be published. The reason this separation exists is, to create a development version of an orb, the [orb-tools/publish-dev](https://github.com/CircleCI-Public/Orb-Project-Template/blob/0354adde8405564ee7fc77e21335090a080daebf/.circleci/config.yml#L62) job requires access to our Personal Access Token which will be secured in a [Restricted Context]({{site.baseurl}}/2.0/contexts/#restricting-a-context). Using a Restricted Context allows us to store our token as an environment variable, but only when the job has been triggered by us, or anyone else with access to the context.

For that reason, we first run our tests which do not require and special access, and therefore could run from open source PRs, and then we place the workflow [on-hold](https://github.com/CircleCI-Public/Orb-Project-Template/blob/0354adde8405564ee7fc77e21335090a080daebf/.circleci/config.yml#L54) for [manual approval]({{site.baseurl}}/2.0/workflows/#holding-a-workflow-for-a-manual-approval).

[image]

When we place a job on-hold for manual approval, the workflow will wait for our physical input, via an alert prompt, before continuing. Once we authorize the manual approval, subsequent jobs will be authorized by us and may access our Restricted Context. This is especially useful when we want to allow open-source pull requests to build against our orb but gives us a chance to ensure there is no malicious code.

After the workflow has been approved, the [orb-tools/publish-dev](https://github.com/CircleCI-Public/Orb-Project-Template/blob/0354adde8405564ee7fc77e21335090a080daebf/.circleci/config.yml#L62) job will publish a development version of your orb twice:

| Published Development Tag | Description|
| ----------| -----------|
| `<namespace>/<orb>@dev:<branch>`     | A development tag linked to the branch name. Useful for testing in your configs. |
| `<namespace>/<orb>@dev:${CIRCLE_SHA1:0:7}`     | A development tag specific to this SHA. Used in the following workflow. |
{: class="table table-striped"}

You can learn more about the testing jobs on the [Orb Testing Methodologies]({{site.baseurl}}/2.0/testing-orbs) page.

#### integration-test_deploy

[integration-test_deploy](https://github.com/CircleCI-Public/Orb-Project-Template/blob/0354adde8405564ee7fc77e21335090a080daebf/.circleci/config.yml#L78) is the second and last workflow to fire in our orb development pipeline. This workflow is manually triggered via API at the end of the `test-pack` workflow. This new workflow will have access to the unique [development version]({{site.baseurl}}/2.0/orb-concepts/#orb-versions-development-vs-production-vs-inline) of our orb that was produced by the `test-pack` workflow.

In this second stage of our pipeline we are mainly running our [integration tests]({{site.baseurl}}/2.0/testing-orbs/#integration-testing), or testing the new orb functionality we have just added and published to the development version of our orb.

After integration testing, and only on the default branch, our deployment job will run. [orb-tools/dev-promote-prod-from-commit-subject](https://circleci.com/orbs/registry/orb/circleci/orb-tools#commands-dev-promote-from-commit-subject) is responsible for taking the SHA specific development version of the orb, and promoting it to a semantically versioned public release.

```yaml
      - orb-tools/dev-promote-prod-from-commit-subject:
          orb-name: <namespace>/<orb-name>
          context: <publishing-context>
          add-pr-comment: false
          fail-if-semver-not-indicated: true
          publish-version-tag: false
          requires:
            - integration-test-1
          filters:
            branches:
              only: <your default branch>
```

The `fail-if-semver-not-indicated` parameter is set to true by default, ensuring any commits without the proper [semver tag]({{site.baseurl}}/2.0/creating-orbs/#how-to-issue-a-new-release) in the commit title, result in a failed build.

You can optionally enable additional features such as publishing a version tag back to GitHub, and automatically posting new versions to the Pull Request via comment.

##### Publish Version Tag To GitHub

Your CircleCI orb will ultimately be hosted and displayed on the [Orb Registry](https://circleci.com/orbs/registry), however, if you would like to track your releases on GitHub, it is possible to automatically publish a version tag from CircleCI.

To push a tag to GitHub, CircleCI will need a [deploy key with write access]({{site.baseurl}}/2.0/add-ssh-key/#circleci-cloud). Follow the linked docs to generate and add your deploy key. When complete, you will see a "fingerprint" generated `"SO:ME:FIN:G:ER:PR:IN:T"` for that key. Add your SSH fingerprint to your `orb-tools/dev-promote-prod-from-commit-subject` job via the `ssh-fingerprints` parameter.

```yaml
      - orb-tools/dev-promote-prod-from-commit-subject:
          publish-version-tag: true
          ssh-fingerprints: "SO:ME:FIN:G:ER:PR:IN:T"
```

You can find a full set of available commands, jobs and parameters for the [orb-tools orb](https://circleci.com/orbs/registry/orb/circleci/orb-tools) on the [Orb Registry](https://circleci.com/orbs/registry/orb/circleci/orb-tools).