---
contentTags: 
  platform:
  - Cloud
  - Server v4.x
  - Server v3.x
  - Server v2.x
---
= Create an orb
:page-layout: classic-docs
:page-liquid:
:page-description: Tutorial showing how to create an orb using the orb development kit.
:icons: font
:toc: macro
:toc-title:

To begin creating your new orb with the orb development kit, follow the steps below. The starting point is creating a new repository on link:https://github.com[GitHub.com].

Ensure the organization on GitHub is the owner for the link:/docs/orb-concepts/#namespaces[CircleCI namespace] for which you are developing your orb. You can also view the video below learn more on getting started. If this is your own personal organization and namespace, you need not worry.

video::5ta4RUwqOBI[youtube]

[#create-a-new-repo]
== 1. Create a new repo

Create a new _empty_ link:https://github.com/new[GitHub repository]. The name of your repository is not critical, but we recommend something similar to "myProject-orb".

NOTE: Ensure that the repository is completely empty. Uncheck any options such as "Add a README.md" or "Choose a license".

image::{{site.baseurl}}/assets/img/docs/new_orb_repo_gh.png[New GitHub Repo]

When complete, you will be brought to a page confirming your new repository and you should see the generated git URL. Note down the git URL, you will need it in step 4. You can select SSH or HTTPS, whichever you can authenticate with. 

image::{{site.baseurl}}/assets/img/docs/github_new_quick_setup.png[Orb Registry]

NOTE: While you must create a local directory for your orb before initializing, it is not necessary to pull down the orb repository. This process will be completed in the `orb init` process and pulling the repository beforehand will cause issues.

== 2. Update the CircleCI CLI

Ensure you are using the latest version of the CircleCI CLI. You must be using version `v0.1.17087` of the CLI or later.

```shell
$ circleci update

$ circleci version
```

== 3. Initialize your orb

Open a terminal and initialize your new orb project using the `orb init` CLI command.

CAUTION: If you are using CircleCI server, you should ensure the `--private` flag is used here to keep your orbs private within your installation.

WARNING: Once an orb is initialized, it **cannot be switched from public to private or vice versa**. Please make sure to add the `--private` flag if you intend to create a private orb.


* To initialize a link:/docs/orb-intro/#public-orbs[public] orb:
+
```shell
circleci orb init /path/to/myProject-orb
```

* To initialize a link:/docs/orb-intro/#private-orbs[private] orb:
+
```shell
circleci orb init /path/to/myProject-orb --private
```

The `circleci orb init` command is called, followed by a path that will be created and initialized for our orb project. It is best practice to use the same name for this directory and the git project repo.


== 4. Choose the fully automated orb setup option

```shell
? Would you like to perform an automated setup of this orb?:
   â–¸  Yes, walk me through the process.
      No, I will handle everything myself.
```

When choosing the fully automated option, the link:https://github.com/CircleCI-Public/Orb-Template[Orb-Template] will be downloaded and automatically modified with your customized settings. The project will be followed on CircleCI with an automated CI/CD pipeline included.

For more information on the included CI/CD pipeline, see the [Orb Publishing Process]({{site.baseurl}}/creating-orbs/) documentation.

Alternatively, if you would simply like a convenient way of downloading the link:https://github.com/CircleCI-Public/Orb-Template[Orb-Template] you can opt to handle everything yourself. When choosing the manual option, see link:/docs/orb-author-validate-publish/[Manual Orb Authoring Process] for instructions on how to author and publish your orb.

== 5. Follow the prompts to set up your orb

In the background, the `orb init` command will be copying and customizing the [Orb Template](https://github.com/CircleCI-Public/Orb-Template) based on your inputs. There are detailed `README.md` files within each directory that contain helpful information specific to the contents of each directory. You will also be asked for the remote git repository URL that you obtained back in step 1.

The [Orb Template](https://github.com/CircleCI-Public/Orb-Template) contains a full CI/CD pipeline (described in [Orb Publishing Process]({{site.baseurl}}/creating-orbs/)) which automatically [packs]({{site.baseurl}}/orb-concepts/#orb-packing), [tests]({{site.baseurl}}/testing-orbs/), and [publishes](https://circleci.com/docs/creating-orbs/) your orb.

In the setup process you will be asked if you would like to save your [Personal API Token]({{site.baseurl}}/managing-api-tokens/) into an `orb-publishing` [context]({{site.baseurl}}/contexts/). Saving this token is necessary for publishing development and production versions of your orb. If you have already made an orb in the past, you can skip this step, as the context will already exist.

== 6. Restrict who can trigger jobs for the orb

Use link:/docs/contexts/#restrict-a-context-to-a-security-group-or-groups[security groups] to limit access to users that are allowed to trigger jobs. Only these users will have access to the private [Personal API Token]({{site.baseurl}}/managing-api-tokens/).

link:/docs/contexts/#restricting-a-context[Contexts] can be located by navigating to _Organization Settings > Contexts_ in the web app. After creating your orb, you will have a new context called `orb-publishing`. Click into `orb-publishing` and add a _Security Group_.

video::ImPE969yv08[youtube]

== 7. Push changes to Github

During the setup process, the `orb init` command takes steps to prepare your automated orb development pipeline. The modified template code produced by the CLI must be pushed to the repository before the CLI can continue and automatically follow your project on CircleCI. 

Run the following command from a separate terminal when prompted to do so, substituting the name of your default branch:

```shell
git push origin <default-branch>
```
    
Once complete, return to your terminal and confirm the changes have been pushed.

== 8. Complete the setup

Once the changes have been pushed, return to your terminal and continue the setup process. The CLI will now automatically follow the project on CircleCI, and attempt to trigger a pipeline to build and test your orb with sample code.

You will be provided with a link to the project building on CircleCI where you can view the full pipeline. You should also see the CLI has automatically migrated you into a new development branch, named `alpha`. You can use any branch naming you would like, you do not need to exclusively develop on `alpha`.

== 9. Enable Dynamic Configuration

Because we are making use of [dynamic configuration]({{site.baseurl}}/dynamic-config/), we must first enable this feature. You will receive an error on your first pipeline that will state that this feature is not yet enabled.

Following the [Getting started with dynamic config in CircleCI]({{site.baseurl}}/dynamic-config/#getting-started-with-dynamic-config-in-circleci), open the **Project Settings** page for your orb on CircleCI, navigate to the **Advanced** tab, and click on the **Enable dynamic config using setup workflows** button.

Once enabled, all future commits to your project will run through the full pipeline and test your orb. We could manually re-run the pipeline at this point, but since we are only working with sample code at this moment, we don't need to.

== 10. Develop your orb

From a non-default branch (you will be moved to the `alpha` branch automatically at setup), begin modifying the sample orb code to fit your requirements. On each _push_, your orb will be automatically built and tested. More information on developing your orb can be found on the link:/docs/orb-author/#writing-your-orb[orb authoring process] page.

Be sure to view the link:https://github.com/CircleCI-Public/Orb-Template/blob/main/.circleci/test-deploy.yml[.circleci/test-deploy] file to view how your orb components are being tested, and modify your tests as you change your orb. Learn more about testing your orb on the [orb testing methodologies]({{site.baseurl}}/testing-orbs/) page.

When you are ready to deploy the first production version of your orb, find information on deploying changes on the link:/docs/creating-orbs/[Orb Publishing Process] page.

video::kTeRJrwxShI[youtube]