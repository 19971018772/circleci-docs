. Save the script below as `download-launch-agent.sh` in the root of your project. When run (see the next step) the script will download the launch-agent binary, verify the checksum, and set the `circleci-launch-agent` version.
+
Self-hosted runners on cloud auto-update to the latest supported versions. For server, specific self-hosted runner versions are validated for interoperability, and self-hosted runners do not auto-update.
+
```shell
#!/usr/bin/env sh

set -eu pipefail

echo "Installing CircleCI Runner for ${platform}"

base_url="https://circleci-binary-releases.s3.amazonaws.com/circleci-launch-agent"
if [ -z ${agent_version+x} ]; then
  agent_version=$(curl "${base_url}/release.txt")
fi

# Set up runner directory
echo "Setting up CircleCI Runner directory"
prefix=/var/opt/circleci
sudo mkdir -p "${prefix}/workdir"

# Downloading launch-agent (machine runner)
echo "Using CircleCI Launch Agent version ${agent_version}"
echo "Downloading and verifying CircleCI Launch Agent Binary"
curl -sSL "${base_url}/${agent_version}/checksums.txt" -o checksums.txt
file="$(grep -F "${platform}" checksums.txt | cut -d ' ' -f 2 | sed 's/^.//')"
mkdir -p "${platform}"
echo "Downloading CircleCI Launch Agent: ${file}"
curl --compressed -L "${base_url}/${agent_version}/${file}" -o "${file}"

# Verifying download
echo "Verifying CircleCI Launch Agent download"
grep "${file}" checksums.txt | sha256sum --check && chmod +x "${file}"
sudo cp "${file}" "${prefix}/circleci-launch-agent" || echo "Invalid checksum for CircleCI Launch Agent, please try download again"
```

. Set your platform and run the `download-launch-agent.sh` script to download, verify, and install the binary. If you are using **cloud**, use the table below to find your platform variable:
+
[.table.table-striped]
[cols=2*, options="header", stripes=even]
|===
| Installation Target
| Variable

ifdef::linux[]
| Linux x86_64
| `platform=linux/amd64`

| Linux ARM64
| `platform=linux/arm64`

| Linux s390x
| `platform=linux/s390x`

| Linux ppc64le
| `platform=linux/ppc64le`
endif::[]

ifdef::macos[]
| macOS x86_64
| `platform=darwin/amd64`

| macOS M1
| `platform=darwin/arm64`
endif::[]
|===

ifdef::linux[]
+
For example, on **cloud**, to set your platform for Linux x86_64 and run the `download-launch-agent.sh` script, run the following:
+
```shell
export platform=linux/amd64 && sh ./download-launch-agent.sh
```
endif::[]
ifdef::macos[]
+
For example, on **cloud**, to set your platform for macOS M1 and run the `download-launch-agent.sh` script, run the following:
+
```shell
export platform=darwin/arm64 && sh ./download-launch-agent.sh
```
endif::[]
+
For *server v3.1.0 and up*, use the table below to find the compatible machine runner launch-agent version for the version of server you are running:
+
[.table.table-striped]
[cols=2*, options="header", stripes=even]
|===
| Server version
| Launch agent version

| 3.0
| Runner not supported

| 3.1
| 1.0.11147-881b608

| 3.2
| 1.0.19813-e9e1cd9

| 3.3
| 1.0.29477-605777e

| 3.4
| 1.0.48283-583799b

| 4.0
| 1.0.48283-583799b
|===
+
Substitute `<launch-agent-version>` with your launch-agent version for server and run the following:
+
```shell
export agent_version="<launch-agent-version>" && sh ./download-launch-agent.sh
```
+
**Note:** Once your runner is successfully set up, you can delete the `download-launch-agent.sh` file.